#class $mod_name open;

#alias {${mod_name}_load} {
    #showme module $mod_name loaded;
    #unalias ${mod_name}_load;
};

#alias {${mod_name}_unload}{
    #showme module $mod_name unloaded.;
    #class $mod_name kill;
};

#ACTION {http://pkuxkx.net/antirobot/robot.php?filename=%*}
{
    #system {firefox http://pkuxkx.net/antirobot/robot.php?filename=%1};
};

#alias {_tstmsg} {
    #showme <139>test : %0<079>;
};
#alias {xue.start} {
    #var testfreq %3;
    
    #class xue.start.inner open;
    
    #tic {tk_xue}{xue %1 for %2 $testfreq}{1};
    #tic {tk_chihe} {eat liang;he jiudai}{60};
    #tic {tk_yunjing} {yun jing}{66};
    
    #act {^也许是缺乏实战经验，你%*总是无法领会} {
        xue.stop;
    };
    #act {^你今天太累了，结果什么也没有学到} {
        #untic {tk_xue};
        goto 休息室;
        on_there {
            #class xue.start.sleep open;
            
            #act {你刚在三分钟内睡过一觉} {
                _tstmsg 睡觉cd中,5秒后再尝试睡觉;
                #delay {dl_sleep} {
                    sleep;
                } {5};
            };
            #act {你一觉醒来，精神抖擞地活动了几下手脚} {
                #cr;
                goto 朱熹;
                on_there {
                    #tic {tk_xue} {xue zhu for literate 1} {1};
                };
                #class xue.start.sleep kill;
            };
            #class xue.start.sleep close;
            sleep;
        };
    };
    #nop 书生说道：您太客气了，这怎么敢当;
    #act {{看上去书生并不想教你|书生像是受宠若惊一样|书生说道：您太客气了}} {
        #untic {tk_xue};
        #show <139>test : 该给钱了<079>;
        give 1 cash to shu sheng;
        #delay {dl_restart_xue} {#tic {tk_xue}{xue shu sheng for literate 25}{1};}{2};
    };
    #class xue.start.inner close;
    yun jing;
};
#alias {xue.stop} {
    #class xue.start.inner kill;
    #undelay {dl_restart_xue};
    #untic {tk_xue};
};
#alias {zq.start} {
    #class zq.start.inner open;
    
    #var murenid 1;
    
    #tic {tk_lwzq} {
        #if {$status[energy] < @eval{$status[energy_max] * 0.5}} {
            halt;
            zq.stop;
            #delay {2} {
                #act {你吐纳完毕，睁开双眼，站了起来} {
                    #unact {你吐纳完毕，睁开双眼，站了起来};
                    zq.start;
                };
                tuna 6000;
            };
        };
        #elseif {$status[hp_valid] < @eval{$status[hp_max] * 0.98}} {
            halt;
            zq.stop;
            #delay {2} {
                yun heal;
                zq.start;
            };
        };
        #else {
            #if {$status[hp] < @eval{$status[hp_valid] * 0.5}} {
                yun recover;
            };
            perform zui-quan.lingwu;
        };
    } {10};
    #tic {tk_chihe} {he jiudai;eat liang}{60};
    #act {^未有对手或者你和对方未处于战斗中，不能%*领悟醉拳} {
        fight mu ren;
    };
    #act {^你刚跟这个木人练过功} {
        
        #if {$murenid == 1} {
            #var murenid 2;
            fight mu ren 2;
        } {
            #var murenid 1;
            fight mu ren;
        };
    };
    #class zq.start.inner close;
    bei none;
    fight mu ren;
    perform zui-quan.lingwu;
};
#alias {zq.stop} {
    #class zq.start.inner kill;
};


#alias {chaojing} {
    #act {^http://pkuxkx.net/antirobot/robot.php?filename=%*} {
        #unact {^http://pkuxkx.net/antirobot/robot.php?filename=%*};
        #show %%0;
    } {4};
    #act {^云游僧人说道：记住你的工号：} {
        #unact {^云游僧人说道：记住你的工号：};
        goto 石经峪;
        on_there {
            #act {^你默写良久，终于抄完了，看样子可以回去领工钱了} {
                #unact {^你默写良久，终于抄完了，看样子可以回去领工钱了};
                goto 石门寺;
                on_there {
                    #act {^云游僧人说道：「报上你的口令！report 口令！」} {
                        #unact {^云游僧人说道：「报上你的口令！report 口令！」};
                        #showme <139>输入工号领工资(report 工号):<079>;
                        #buffer lock;
                    };
                    ask sengren about done;
                };
            };
            write jing;
        };
    };
    ask sengren about job;
};

#alias {on_test_pass} {
    #alias cb_on_test_pass_true #cr;
    #alias cb_on_test_pass_false #cr;
    
    #alias cb_on_test_pass_true {%1};
    #alias cb_on_test_pass_false {%2};
    
    #if {$tt == 1} {
        cb_on_test_pass_true;
    } {
        cb_on_test_pass_false;
    };
};
#alias {testa} {
    #var tt %1;
    on_test_pass {
        #show pass;
        #show test ok;
    } {
        #show fail;
        #show test failed;
    };
}

#alias {gozqt} {
    #class gozqt_inner open;
    
    #act {^%S%s-%s$} {
        #if {"%%1" == "紫气台"} {
            #class gozqt_inner kill;
        } {
            #show %%1;
        };
    };
    #tic {tk_gozqt} {ed;wu;westup} {2};
    
    #class gozqt_inner open;
}

#alias {showtime} {
    
    #class showtime_inner open;
    
    #act {^管事对你说道：你去%*表演一下吧} {
        #var showtime[pos] %%1;
    };
    #act {^管事吩咐手下给了你一套表演道具} {
        _tstmsg 领到道具，出发表演;
        goto $showtime[pos];
        on_there {
            biaoyan suizhuan;
        };
    };
    #act {^你只见好大的块砖头应声而碎，旁人看得张大口说不出话来} {
        _tstmsg 表演完毕;
        biaoyan suizhuan;
    };
    #act {^你已唱完戏了，回去报告吧} {
        goto 戏园子;
        on_there {
            ask guan about 完成;
        };
    };
    #act {^管事把唱戏道具收了回去} {
        _tstmsg 唱戏完成;
        #class showtime_inner kill;
    };
    
    #class showtime_inner close;
    
    ask guan about job;
};

#alias {climbtree} {
    #if {"%1" == "stop"} {
        #class climb_tree_inner kill;
    } {
        #class climb_tree_inner open;
        
        #act {^你领悟出一些基本轻功方面的窍门} {
            #delay {1.5} {climb tree};
        };
        #act {^你减缓真气运行，让气血运行恢复正常} {
            yun qi;
        };
        #act {^你现在正忙着呢} {
            #delay {1} {he jiudai;eat liang;climb tree};
        };
        #act {^你身子发虚，一头栽了下来，哎呀} {
            #delay {20} {
                climb tree;
            };
        };
        #act {^( 你上一个动作还没有完成，不能施用内功。)} {
            #delay {1} {yun qi};
        };
        #class climb_tree_inner close;
        yun qi;
        climb tree;
    };
};

#alias {baij} {
    #If {"%1" == "stop"} {
        #class baij_inner kill;
    } {
        #class baij_inner open;
        
        #var baiji_count 10;
        
        #act {^你减缓真气运行，让自身恢复正常} {
            yun jing;
        };
        #tic {tk_bj} {
            #if {$status[sp] < @eval{$status[sp_max] * 0.5}} {
                #var baiji_count 3;
            };
            #elseif {$status[sp] > @eval{$status[sp_max] - 200}} {
                #var baiji_count 10;
            };
            do $baiji_count baiji xiang;
        } {1};
        #tic {tk_chihe} {chi liang ;he jiudai} {40};
        #tic {tk_yunjing} {yun jing} {62};
        
        #class baij_inner close;
        yun jing;
    };
};

#act {^%s%S(%w %w) <昏迷不醒>} {
    #show <139>有人昏了 : %3 %4<079>;
    kill @lower{%3} %4;
};

#alias {gn} {gan che to north};
#alias {gs} {gan che to south};
#alias {ge} {gan che to east};
#alias {gw} {gan che to west};
#alias {gne} {gan che to northeast};
#alias {gnw} {gan che to northwest};
#alias {gse} {gan che to southeast};
#alias {gsw} {gan che to northeast};
#alias {gup} {gan che to up};
#alias {gdown} {gan che to down};
#alias {genter} {gan che to enter};
#alias {gout} {gan che to out};

#alias {w2e} {e;e;e;e;e;e;e;e};
#alias {w2n} {e;e;e;e;n;n;n;n};
#alias {w2s} {e;e;e;e;s;s;s;s};
#alias {s2n} {n;n;n;n;n;n;n;n};
#alias {s2w} {n;n;n;n;w;w;w;w};
#alias {s2e} {n;n;n;n;e;e;e;e};
#alias {e2w} {w;w;w;w;w;w;w;w};
#alias {e2n} {w;w;w;w;n;n;n;n};
#alias {e2s} {w;w;w;w;s;s;s;s};
#alias {n2s} {s;s;s;s;s;s;s;s};
#alias {n2w} {s;s;s;s;w;w;w;w};
#alias {n2e} {s;s;s;s;e;e;e;e};
#alias {ka} {killall};

#class $mod_name close;

${mod_name}_load;
